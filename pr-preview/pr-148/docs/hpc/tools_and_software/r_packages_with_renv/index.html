<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-hpc/tools_and_software/r_packages_with_renv" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">R Packages with renv | Connecting researchers to computational resources.</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://services.rt.nyu.edu/pr-preview/pr-148/img/NYU.svg"><meta data-rh="true" name="twitter:image" content="https://services.rt.nyu.edu/pr-preview/pr-148/img/NYU.svg"><meta data-rh="true" property="og:url" content="https://services.rt.nyu.edu/pr-preview/pr-148/docs/hpc/tools_and_software/r_packages_with_renv/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="R Packages with renv | Connecting researchers to computational resources."><meta data-rh="true" name="description" content="Is this needed:"><meta data-rh="true" property="og:description" content="Is this needed:"><link data-rh="true" rel="icon" href="/pr-preview/pr-148/img/NYU.ico"><link data-rh="true" rel="canonical" href="https://services.rt.nyu.edu/pr-preview/pr-148/docs/hpc/tools_and_software/r_packages_with_renv/"><link data-rh="true" rel="alternate" href="https://services.rt.nyu.edu/pr-preview/pr-148/docs/hpc/tools_and_software/r_packages_with_renv/" hreflang="en"><link data-rh="true" rel="alternate" href="https://services.rt.nyu.edu/pr-preview/pr-148/docs/hpc/tools_and_software/r_packages_with_renv/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"R Packages with renv","item":"https://services.rt.nyu.edu/pr-preview/pr-148/docs/hpc/tools_and_software/r_packages_with_renv"}]}</script><link rel="alternate" type="application/rss+xml" href="/pr-preview/pr-148/blog/rss.xml" title="Connecting researchers to computational resources. RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/pr-preview/pr-148/blog/atom.xml" title="Connecting researchers to computational resources. Atom Feed"><link rel="stylesheet" href="/pr-preview/pr-148/assets/css/styles.508f649a.css">
<script src="/pr-preview/pr-148/assets/js/runtime~main.edb5b2ca.js" defer="defer"></script>
<script src="/pr-preview/pr-148/assets/js/main.acdb226a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/pr-preview/pr-148/img/NYU.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_QK_K" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/pr-preview/pr-148/"><div class="navbar__logo"><img src="/pr-preview/pr-148/img/NYU.svg" alt="NYU torch logo" class="themedComponent_qITe themedComponent--light_P7Wy"><img src="/pr-preview/pr-148/img/NYU.svg" alt="NYU torch logo" class="themedComponent_qITe themedComponent--dark_lB6v"></div><b class="navbar__title text--truncate">Research Technology Services</b></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/pr-preview/pr-148/docs/genai/getting_started/intro/">Pythia</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/pr-preview/pr-148/docs/hpc/getting_started/intro/">HPC</a><a class="navbar__item navbar__link" href="/pr-preview/pr-148/docs/cloud/getting_started/intro/">Cloud</a><a class="navbar__item navbar__link" href="/pr-preview/pr-148/docs/srde/getting_started/intro/">SRDE</a><a href="https://hsrn.nyu.edu/docs/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">HSRN<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a><a class="navbar__item navbar__link" href="/pr-preview/pr-148/blog/">Announcements</a><div class="toggle_Epwe colorModeToggle_bc_c"><button class="clean-btn toggleButton_w7AH toggleButtonDisabled_HAH_" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 lightToggleIcon_V1T6"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 darkToggleIcon_wogB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_XvL5 systemToggleIcon_rTjK"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_linB"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_MITy"><div class="docsWrapper_qr7G"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_F9zA" type="button"></button><div class="docRoot_clrU"><aside class="theme-doc-sidebar-container docSidebarContainer_hWjn"><div class="sidebarViewport_J_uj"><div class="sidebar_nG7m"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_ilEL"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/getting_started/intro/">Getting Started</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/connecting_to_hpc/connecting_to_hpc/">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/storage/intro_and_data_management/">Storage &amp; Data transfers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/datasets/intro/">Datasets</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/submitting_jobs/slurm_submitting_jobs/">Submitting jobs</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/pr-preview/pr-148/docs/hpc/tools_and_software/software_on_greene/">Tools &amp; Software available</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-148/docs/hpc/tools_and_software/software_on_greene/">Software on Greene</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-148/docs/hpc/tools_and_software/python_packages_with_virtual_environments/">Python Packages with Virtual Environments</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/pr-preview/pr-148/docs/hpc/tools_and_software/r_packages_with_renv/">R Packages with renv</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-148/docs/hpc/tools_and_software/conda_environments/">Conda Environments (Python, R)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/pr-preview/pr-148/docs/hpc/tools_and_software/sqlite_handling_large_structured_data/">SQLite: Handling Large Structured Data</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/containers/intro/">Containers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/ml_ai_hpc/intro/">ML/AI on HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/ood/ood_intro/">Open OnDemand (OOD)</a></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-148/docs/hpc/spec_sheet/">Greene Spec Sheet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/pr-preview/pr-148/docs/hpc/system_status/">Greene System Status</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/tutorial_intro_shell_hpc/intro/">Tutorial: Intro to Shell for HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/tutorial_intro_hpc/intro_hpc/">Tutorial: Intro to HPC</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/pr-preview/pr-148/docs/hpc/support/support/">Support</a></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_cQ77"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_XMUu"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_v37g"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DbD0"><div class="docItemContainer_vk7o"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_SjX4" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/pr-preview/pr-148/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_u2qz"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Tools &amp; Software available</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">R Packages with renv</span></li></ul></nav><div class="tocCollapsible_sUCF theme-doc-toc-mobile tocMobile_nu_L"><button type="button" class="clean-btn tocCollapsibleButton_Fdrn">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>R Packages with renv</h1></header>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="is-this-needed">Is this needed:<a href="#is-this-needed" class="hash-link" aria-label="Direct link to Is this needed:" title="Direct link to Is this needed:">​</a></h2>
<div class="theme-admonition theme-admonition-tip admonition_Ng6n alert alert--success"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_oejY"><p>If you would like to use conda with <code>renv</code> you need to add following steps:</p><ul>
<li>After you activate conda AND before loading R<!-- -->
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">export</span><span class="token plain"> </span><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">R_RENV_DEFAULT_LIBPATHS</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">path_to_project_directory</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">/renv/lib/x86_64-conda_cos6-linux-gnu/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">version</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">/</span><br></span></code></pre></div></div>
</li>
<li>Start R and execute<!-- -->
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">.libPaths</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">c</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token plain">.libPaths</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><span class="token plain">, Sys.getenv</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">(</span><span class="token string" style="color:hsl(119, 34%, 47%)">&quot;R_RENV_SYSTEM_LIBRARY&quot;</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">))</span><span class="token punctuation" style="color:hsl(119, 34%, 47%)">)</span><br></span></code></pre></div></div>
</li>
</ul></div></div>
<p>You may use the renv R package to create a personal R Project environment for R packages. Documentation on renv can be found on the <a href="https://rstudio.github.io/renv/" target="_blank" rel="noopener noreferrer">RStudio site</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="setup">Setup<a href="#setup" class="hash-link" aria-label="Direct link to Setup" title="Direct link to Setup">​</a></h2>
<p>Say your R code is in directory /scratch/$USER/projects/project1</p>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token builtin class-name" style="color:hsl(35, 99%, 36%)">cd</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/projects/project1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load r/gcc/4.5.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="automatic-deletion-of-your-files">Automatic deletion of your files<a href="#automatic-deletion-of-your-files" class="hash-link" aria-label="Direct link to Automatic deletion of your files" title="Direct link to Automatic deletion of your files">​</a></h3>
<p>This page describes the installation of packages on /scratch. One has to remember, though, that files stored in the HPC scratch file system are subject to the HPC Scratch old file purging policy: <br>
<strong>Files on the <code>/scratch</code> file system that have not been accessed for 60 or more days will be purged.</strong> Please see details at <a href="/pr-preview/pr-148/docs/hpc/storage/intro_and_data_management/">HPC Storage</a>.</p>
<p>Thus you can consider the following options:</p>
<ul>
<li>Reinstall your packages if some of the files get deleted<!-- -->
<ul>
<li>You can do this manually</li>
<li>You can do this automatically. For example, within a workflow of a pipeline software like <a href="https://www.nextflow.io/" target="_blank" rel="noopener noreferrer">Nextflow</a></li>
</ul>
</li>
<li>Pay for &quot;Research Project Space&quot; - Details available at <a href="/pr-preview/pr-148/docs/hpc/storage/research_project_space/">Research Project Space</a></li>
<li>Use Singularity and install packages within a corresponding overlay file - Details available at <a href="/pr-preview/pr-148/docs/hpc/containers/squash_file_system_and_singularity/">Squash File System and Singularity</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="cache-directory-setup">Cache directory setup<a href="#cache-directory-setup" class="hash-link" aria-label="Direct link to Cache directory setup" title="Direct link to Cache directory setup">​</a></h3>
<p>By default, renv will cache package installation files to your home directory (most likely either in <code>~/.local/share/renv</code> or <code>~/.cache/R/renv/</code> or something similar).</p>
<p>To avoid filling up your home directory, we advise to set up path to alternative cache directory (otherwise your home directory may fill up quickly)</p>
<ul>
<li>Create directory</li>
</ul>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token function" style="color:hsl(221, 87%, 60%)">mkdir</span><span class="token plain"> </span><span class="token parameter variable" style="color:hsl(221, 87%, 60%)">-p</span><span class="token plain"> /scratch/</span><span class="token environment constant" style="color:hsl(35, 99%, 36%)">$USER</span><span class="token plain">/.cache/R/renv</span><br></span></code></pre></div></div>
<ul>
<li>Create a file in you project directory named <code>.Renviron</code> and put the following in in the file. It is the R project directory (<code>/scratch/$USER/projects/project1</code>) in this example.</li>
</ul>
<div class="language-sh codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-sh codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token assign-left variable" style="color:hsl(221, 87%, 60%)">RENV_PATHS_ROOT</span><span class="token operator" style="color:hsl(221, 87%, 60%)">=</span><span class="token plain">/scratch/</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&lt;</span><span class="token plain">USER_NETID</span><span class="token operator" style="color:hsl(221, 87%, 60%)">&gt;</span><span class="token plain">/.cache/R/renv</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="init-renv">Init renv<a href="#init-renv" class="hash-link" aria-label="Direct link to Init renv" title="Direct link to Init renv">​</a></h3>
<p>The renv package is already installed for module <code>r/gcc/4.5.0</code>. You need to install it yourself if you use other R module version</p>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">## Do this if renv is not available (already installed for r/gcc/4.4.0)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># install.packages(&quot;renv&quot;)  ## By default this will install renv package into a sub-directory within your home directory</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">## init renv in project&#x27;s directory</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::init(&quot;.&quot;)</span><br></span></code></pre></div></div>
<ul>
<li>Restart R for renv to take effect. Once you start R, your renv environment will be loaded automatically.</li>
</ul>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R version 4.5.0 (2025-04-11) -- &quot;How About a Twenty-Six&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">...</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* Project &#x27;/scratch/$USER/projects/project1&#x27; loaded. [renv 1.1.4]</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="check">Check<a href="#check" class="hash-link" aria-label="Direct link to Check" title="Direct link to Check">​</a></h3>
<ul>
<li>You can check your library paths with the .libPaths() command</li>
</ul>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">&gt; .libPaths()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[1] &quot;/scratch/$USER/projects/project1/renv/library/R-4.1/x86_64-pc-linux-gnu&quot;</span><br></span></code></pre></div></div>
<ul>
<li>You can check where the cache is set with the following:</li>
</ul>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::paths$cache()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">#[1] &quot;/home/$USER/.cache/R/renv/cache/v5/R-4.1/x86_64-pc-linux-gnu&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="addremove-etc-packages">Add/remove, etc. packages<a href="#addremove-etc-packages" class="hash-link" aria-label="Direct link to Add/remove, etc. packages" title="Direct link to Add/remove, etc. packages">​</a></h3>
<p>Install a package, such as reshape2. Below we can see it is not yet installed and then install it.</p>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">library(reshape2)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Error in library(reshape2) : there is no package called ‘reshape2’</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">install.packages(&quot;reshape2&quot;)</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_Ng6n alert alert--secondary"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_oejY"><p>You must be in the project1 directory for renv to load your project and the appropriate personal environment that you have created. If you want to copy your environment to a new location, use the bundle package, as shown below.</p></div></div>
<p>Test R file</p>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">print(&quot;hello&quot;)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::restore()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">library(reshape2)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">names(airquality) &lt;- tolower(names(airquality))</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">head(airquality)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">aql &lt;- melt(airquality)</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">print(&quot;hello again&quot;)</span><br></span></code></pre></div></div>
<p>For testing run it as</p>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">srun --pty /bin/bash</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">Rscript test.R</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-note admonition_Ng6n alert alert--secondary"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_oejY"><p>Your <code>.Rprofile</code> file will include line <code>source(&quot;renv/activate.R&quot;)</code></p></div></div>
<p>The file will output the following:</p>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[1] &quot;hello&quot;</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">* The library is already synchronized with the lockfile.</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">  ozone solar.r wind temp month day</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">1    41     190  7.4   67     5   1</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">2    36     118  8.0   72     5   2</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">3    12     149 12.6   74     5   3</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">4    18     313 11.5   62     5   4</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">5    NA      NA 14.3   56     5   5</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">6    28      NA 14.9   66     5   6</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">No id variables; using all as measure variables</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">[1] &quot;hello again&quot;</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="clean-up">Clean up<a href="#clean-up" class="hash-link" aria-label="Direct link to Clean up" title="Direct link to Clean up">​</a></h3>
<p>Keep only the packages that you use in this particular project (not all the packages available on the system)</p>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R # launch R</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::clean() # remove packages not recorded in the lockfile from the target library</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="recommended-workflow">Recommended Workflow<a href="#recommended-workflow" class="hash-link" aria-label="Direct link to Recommended Workflow" title="Direct link to Recommended Workflow">​</a></h3>
<p>The general workflow when working with renv is:</p>
<ol>
<li>Call <code>renv::init()</code> to initialize a new project-local environment with a private R library,</li>
<li>Work in the project as normal, installing and removing new R packages as they are needed in the project,</li>
<li>Call <code>renv::snapshot()</code> to save the state of the project library to the lockfile (called <code>renv.lock</code>),<!-- -->
<ul>
<li>By default, <code>renv::snapshot()</code> will only capture packages listed in your R scripts within the R Project. For more options read the <a href="https://rstudio.github.io/renv/reference/snapshot.html" target="_blank" rel="noopener noreferrer"><code>renv::snapshot()</code> documentation</a>.</li>
</ul>
</li>
<li>Continue working on your project, installing and updating R packages as needed.</li>
<li>If needed, call <code>renv::restore()</code> to revert to the previous state as encoded in the lockfile if your attempts to update packages introduced some new problems.</li>
</ol>
<p>The <code>renv::init()</code> function attempts to ensure the newly-created project library includes all R packages currently used by the project. It does this by crawling R files within the project for dependencies with the <code>renv::dependencies()</code> function. The discovered packages are then installed into the project library with the <code>renv::hydrate()</code> function, which will also attempt to save time by copying packages from your user library (rather than reinstalling from CRAN) as appropriate.</p>
<p>Calling <code>renv::init()</code> will also write out the infrastructure necessary to automatically load and use the private library for new R sessions launched from the project root directory. This is accomplished by creating (or amending) a project-local <code>.Rprofile</code> with the necessary code to load the project when the R session is started.</p>
<p>If you’d like to initialize a project without attempting dependency discovery and installation – that is, you’d prefer to manually install the packages your project requires on your own – you can use <code>renv::init(bare = TRUE)</code> to initialize a project with an empty project library.</p>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="use-with-sbatch">Use with sbatch<a href="#use-with-sbatch" class="hash-link" aria-label="Direct link to Use with sbatch" title="Direct link to Use with sbatch">​</a></h2>
<p>When you launch a job with sbatch,  R will check if there is an <code>renv</code> directory, and if <code>renv</code> is on it will pick up packages, installed using <code>renv</code> in the current directory.</p>
<p>Before you launch an sbatch job, you need to make sure your project <code>renv</code> environment is ready, as outlined in the previous section.</p>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="store-and-share-your-r-projects-r-version-and-r-package-versions">Store and Share your R Project&#x27;s R version and R Package Versions<a href="#store-and-share-your-r-projects-r-version-and-r-package-versions" class="hash-link" aria-label="Direct link to Store and Share your R Project&#x27;s R version and R Package Versions" title="Direct link to Store and Share your R Project&#x27;s R version and R Package Versions">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="reproduce-environment">Reproduce Environment<a href="#reproduce-environment" class="hash-link" aria-label="Direct link to Reproduce Environment" title="Direct link to Reproduce Environment">​</a></h3>
<p>If you already have file <code>renv.lock</code> or bundle file skip step 1</p>
<ol>
<li>In the original location (your own laptop for example) go to project directory and execute</li>
</ol>
<div class="theme-admonition theme-admonition-warning admonition_Ng6n alert alert--warning"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_oejY"><p>Make sure the whole path to project directory and names of your script files don&#x27;t have empty spaces!</p></div></div>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain"># install.packages(&quot;renv&quot;)  ## if needed</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::init()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::snapshot()</span><br></span></code></pre></div></div>
<ol start="2">
<li>Take file <code>renv.lock</code> and copy it to a new location for the project</li>
<li>At the new location - restore environment: go to directory of the project and execute.</li>
</ol>
<div class="theme-admonition theme-admonition-warning admonition_Ng6n alert alert--warning"><div class="admonitionHeading_h3_P"><span class="admonitionIcon_xiRV"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_oejY"><p>Make sure version of R is the same</p></div></div>
<div class="language-R language-r codeBlockContainer_NMi0 theme-code-block" style="--prism-background-color:hsl(230, 1%, 98%);--prism-color:hsl(230, 8%, 24%)"><div class="codeBlockContent_RSaD"><pre tabindex="0" class="prism-code language-r codeBlock_cq3s thin-scrollbar" style="background-color:hsl(230, 1%, 98%);color:hsl(230, 8%, 24%)"><code class="codeBlockLines_p1wY"><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">## Reproduce environment</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module purge</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">module load r/gcc/4.5.0</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">R</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::restore()</span><br></span><span class="token-line" style="color:hsl(230, 8%, 24%)"><span class="token plain">renv::init()</span><br></span></code></pre></div></div>
<p><code>renv</code> will install/compile what is needed on any system (Linux, Windows, etc). You can share your code with other researchers no matter what system they use. However, you should be careful that the same version of R is used between systems, as mentioned above.</p>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="what-to-savepublishcommit-with-git">What to save/publish/commit with Git<a href="#what-to-savepublishcommit-with-git" class="hash-link" aria-label="Direct link to What to save/publish/commit with Git" title="Direct link to What to save/publish/commit with Git">​</a></h3>
<p>In order to have your work reproducible by you and/or others:</p>
<ul>
<li>save and/or commit your code in git</li>
<li>be sure to include <code>renv.lock</code> (which lists all packages and versions that you use including the version of R)</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_xx5F" id="migrating-from-packrat">Migrating from Packrat<a href="#migrating-from-packrat" class="hash-link" aria-label="Direct link to Migrating from Packrat" title="Direct link to Migrating from Packrat">​</a></h3>
<p>The <code>renv</code> package has replaced the now deprecated Packrat package. The <code>renv::migrate()</code> function makes it possible to migrate projects from Packrat to <code>renv</code>. See the ?migrate documentation for more details. In essence, calling <code>renv::migrate(&quot;&lt;project path&gt;&quot;)</code> will be enough to migrate the Packrat library and lockfile such that they can then be used by renv.</p>
<h2 class="anchor anchorWithStickyNavbar_xx5F" id="useful-links">Useful links<a href="#useful-links" class="hash-link" aria-label="Direct link to Useful links" title="Direct link to Useful links">​</a></h2>
<ul>
<li><a href="https://rstudio.github.io/renv/articles/renv.html" target="_blank" rel="noopener noreferrer">https://rstudio.github.io/renv/articles/renv.html</a></li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/NYU-RTS/rts-docs/blob/main/docs/hpc/06_tools_and_software/03_r_packages_with_renv.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_lum_" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_HRh4"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/pr-preview/pr-148/docs/hpc/tools_and_software/python_packages_with_virtual_environments/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Python Packages with Virtual Environments</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/pr-preview/pr-148/docs/hpc/tools_and_software/conda_environments/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Conda Environments (Python, R)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_HlGI thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#is-this-needed" class="table-of-contents__link toc-highlight">Is this needed:</a></li><li><a href="#setup" class="table-of-contents__link toc-highlight">Setup</a><ul><li><a href="#automatic-deletion-of-your-files" class="table-of-contents__link toc-highlight">Automatic deletion of your files</a></li><li><a href="#cache-directory-setup" class="table-of-contents__link toc-highlight">Cache directory setup</a></li><li><a href="#init-renv" class="table-of-contents__link toc-highlight">Init renv</a></li><li><a href="#check" class="table-of-contents__link toc-highlight">Check</a></li><li><a href="#addremove-etc-packages" class="table-of-contents__link toc-highlight">Add/remove, etc. packages</a></li><li><a href="#clean-up" class="table-of-contents__link toc-highlight">Clean up</a></li><li><a href="#recommended-workflow" class="table-of-contents__link toc-highlight">Recommended Workflow</a></li></ul></li><li><a href="#use-with-sbatch" class="table-of-contents__link toc-highlight">Use with sbatch</a></li><li><a href="#store-and-share-your-r-projects-r-version-and-r-package-versions" class="table-of-contents__link toc-highlight">Store and Share your R Project&#39;s R version and R Package Versions</a><ul><li><a href="#reproduce-environment" class="table-of-contents__link toc-highlight">Reproduce Environment</a></li><li><a href="#what-to-savepublishcommit-with-git" class="table-of-contents__link toc-highlight">What to save/publish/commit with Git</a></li><li><a href="#migrating-from-packrat" class="table-of-contents__link toc-highlight">Migrating from Packrat</a></li></ul></li><li><a href="#useful-links" class="table-of-contents__link toc-highlight">Useful links</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Contact</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:hpc@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email HPC support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:hsrn-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email HSRN support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:research-cloud-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email research cloud support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email general GenAI support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="mailto:genai-research-support@nyu.edu" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email GenAI for research support<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Links</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://guides.nyu.edu/" target="_blank" rel="noopener noreferrer" class="footer__link-item">NYU Libraries Research Guides<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://sites.google.com/nyu.edu/forc-camp/home" target="_blank" rel="noopener noreferrer" class="footer__link-item">FORC camp<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/pr-preview/pr-148/blog/">Announcements</a></li><li class="footer__item"><a href="https://github.com/NYU-RTS/rts-docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_S7uf"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Made with 💜 in NYC!</div></div></div></footer></div>
</body>
</html>